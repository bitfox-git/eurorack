ARM GAS  /var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cco38zsL.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"yin.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.Yin_difference,"ax",%progbits
  18              		.align	1
  19              		.global	Yin_difference
  20              		.arch armv7e-m
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  24              		.fpu fpv4-sp-d16
  26              	Yin_difference:
  27              	.LVL0:
  28              	.LFB126:
  29              		.file 1 "Project/yin.c"
   1:Project/yin.c **** #include <math.h>
   2:Project/yin.c **** #include "yin.h"
   3:Project/yin.c **** #include <stdint.h>
   4:Project/yin.c **** #include <stdbool.h>
   5:Project/yin.c **** #include "ssd1306.h"
   6:Project/yin.c **** 
   7:Project/yin.c **** // #include "kiss_fft.h"
   8:Project/yin.c **** // #include "_kiss_fft_guts.h"
   9:Project/yin.c **** // #include "kiss_fftr.h"
  10:Project/yin.c **** 
  11:Project/yin.c **** // #include "audiodata.h"
  12:Project/yin.c **** 
  13:Project/yin.c **** Yin yinobject;
  14:Project/yin.c **** 
  15:Project/yin.c **** /* ------------------------------------------------------------------------------------------
  16:Project/yin.c **** --------------------------------------------------------------------------- PRIVATE FUNCTIONS
  17:Project/yin.c **** -------------------------------------------------------------------------------------------*/
  18:Project/yin.c **** 
  19:Project/yin.c **** /**
  20:Project/yin.c ****  * Step 1: Calculates the squared difference of the signal with a shifted version of itself.
  21:Project/yin.c ****  * @param buffer Buffer of samples to process. 
  22:Project/yin.c ****  *
  23:Project/yin.c ****  * This is the Yin algorithms tweak on autocorellation. Read http://audition.ens.fr/adc/pdf/2002_JA
  24:Project/yin.c ****  * for more details on what is in here and why it's done this way.
  25:Project/yin.c ****  */
  26:Project/yin.c **** void Yin_difference(Yin *yin, float* buffer){
  30              		.loc 1 26 45 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cco38zsL.s 			page 2


  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		.loc 1 26 45 is_stmt 0 view .LVU1
  35 0000 10B5     		push	{r4, lr}
  36              	.LCFI0:
  37              		.cfi_def_cfa_offset 8
  38              		.cfi_offset 4, -8
  39              		.cfi_offset 14, -4
  27:Project/yin.c **** 	int16_t i;
  40              		.loc 1 27 2 is_stmt 1 view .LVU2
  28:Project/yin.c **** 	int16_t tau;
  41              		.loc 1 28 2 view .LVU3
  29:Project/yin.c **** 	float delta;
  42              		.loc 1 29 2 view .LVU4
  30:Project/yin.c ****   
  31:Project/yin.c ****   // uint16_t d = MAXIMUM_SAMPLESIZE / yin->bufferSize;
  32:Project/yin.c **** 
  33:Project/yin.c **** 	/* Calculate the difference for difference shift values (tau) for the half of the samples */
  34:Project/yin.c **** 	for(tau = 0 ; tau < yin->halfBufferSize; tau++){
  43              		.loc 1 34 2 view .LVU5
  44              	.LVL1:
  45              		.loc 1 34 10 is_stmt 0 view .LVU6
  46 0002 0024     		movs	r4, #0
  47              		.loc 1 34 2 view .LVU7
  48 0004 1BE0     		b	.L2
  49              	.LVL2:
  50              	.L4:
  35:Project/yin.c ****     yin->yinBuffer[tau] = 0;
  36:Project/yin.c **** 		/* Take the difference of the signal with a shifted version of itself, then square it.
  37:Project/yin.c **** 		 * (This is the Yin algorithm's tweak on autocorellation) */ 
  38:Project/yin.c **** 		for(i = 0; i < yin->halfBufferSize; i++){
  39:Project/yin.c **** 			delta = buffer[i] - buffer[(i + tau)];
  51              		.loc 1 39 4 is_stmt 1 discriminator 3 view .LVU8
  52              		.loc 1 39 18 is_stmt 0 discriminator 3 view .LVU9
  53 0006 01EB8302 		add	r2, r1, r3, lsl #2
  54 000a D2ED007A 		vldr.32	s15, [r2]
  55              		.loc 1 39 34 discriminator 3 view .LVU10
  56 000e 03EB0C02 		add	r2, r3, ip
  57              		.loc 1 39 30 discriminator 3 view .LVU11
  58 0012 01EB8202 		add	r2, r1, r2, lsl #2
  59 0016 92ED007A 		vldr.32	s14, [r2]
  60              		.loc 1 39 10 discriminator 3 view .LVU12
  61 001a 77EEC77A 		vsub.f32	s15, s15, s14
  62              	.LVL3:
  40:Project/yin.c **** 			yin->yinBuffer[tau] += delta * delta;
  63              		.loc 1 40 4 is_stmt 1 discriminator 3 view .LVU13
  64              		.loc 1 40 33 is_stmt 0 discriminator 3 view .LVU14
  65 001e 67EEA77A 		vmul.f32	s15, s15, s15
  66              	.LVL4:
  67              		.loc 1 40 24 discriminator 3 view .LVU15
  68 0022 00EB8C02 		add	r2, r0, ip, lsl #2
  69 0026 92ED017A 		vldr.32	s14, [r2, #4]
  70              	.LVL5:
  71              		.loc 1 40 24 discriminator 3 view .LVU16
  72 002a 77EE277A 		vadd.f32	s15, s14, s15
  73 002e C2ED017A 		vstr.32	s15, [r2, #4]
  74              	.LVL6:
  38:Project/yin.c **** 			delta = buffer[i] - buffer[(i + tau)];
ARM GAS  /var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cco38zsL.s 			page 3


  75              		.loc 1 38 39 is_stmt 1 discriminator 3 view .LVU17
  38:Project/yin.c **** 			delta = buffer[i] - buffer[(i + tau)];
  76              		.loc 1 38 40 is_stmt 0 discriminator 3 view .LVU18
  77 0032 0133     		adds	r3, r3, #1
  78              	.LVL7:
  38:Project/yin.c **** 			delta = buffer[i] - buffer[(i + tau)];
  79              		.loc 1 38 40 discriminator 3 view .LVU19
  80 0034 1BB2     		sxth	r3, r3
  81              	.LVL8:
  82              	.L3:
  38:Project/yin.c **** 			delta = buffer[i] - buffer[(i + tau)];
  83              		.loc 1 38 14 is_stmt 1 discriminator 1 view .LVU20
  38:Project/yin.c **** 			delta = buffer[i] - buffer[(i + tau)];
  84              		.loc 1 38 3 is_stmt 0 discriminator 1 view .LVU21
  85 0036 9E45     		cmp	lr, r3
  86 0038 E5DC     		bgt	.L4
  34:Project/yin.c ****     yin->yinBuffer[tau] = 0;
  87              		.loc 1 34 43 is_stmt 1 discriminator 2 view .LVU22
  34:Project/yin.c ****     yin->yinBuffer[tau] = 0;
  88              		.loc 1 34 46 is_stmt 0 discriminator 2 view .LVU23
  89 003a 0134     		adds	r4, r4, #1
  90              	.LVL9:
  34:Project/yin.c ****     yin->yinBuffer[tau] = 0;
  91              		.loc 1 34 46 discriminator 2 view .LVU24
  92 003c 24B2     		sxth	r4, r4
  93              	.LVL10:
  94              	.L2:
  34:Project/yin.c ****     yin->yinBuffer[tau] = 0;
  95              		.loc 1 34 16 is_stmt 1 discriminator 1 view .LVU25
  34:Project/yin.c ****     yin->yinBuffer[tau] = 0;
  96              		.loc 1 34 25 is_stmt 0 discriminator 1 view .LVU26
  97 003e B0F902E0 		ldrsh	lr, [r0, #2]
  34:Project/yin.c ****     yin->yinBuffer[tau] = 0;
  98              		.loc 1 34 2 discriminator 1 view .LVU27
  99 0042 A645     		cmp	lr, r4
 100 0044 06DD     		ble	.L7
  35:Project/yin.c **** 		/* Take the difference of the signal with a shifted version of itself, then square it.
 101              		.loc 1 35 5 is_stmt 1 view .LVU28
  35:Project/yin.c **** 		/* Take the difference of the signal with a shifted version of itself, then square it.
 102              		.loc 1 35 19 is_stmt 0 view .LVU29
 103 0046 A446     		mov	ip, r4
  35:Project/yin.c **** 		/* Take the difference of the signal with a shifted version of itself, then square it.
 104              		.loc 1 35 25 view .LVU30
 105 0048 00EB8403 		add	r3, r0, r4, lsl #2
 106 004c 0022     		movs	r2, #0
 107 004e 5A60     		str	r2, [r3, #4]	@ float
  38:Project/yin.c **** 			delta = buffer[i] - buffer[(i + tau)];
 108              		.loc 1 38 3 is_stmt 1 view .LVU31
 109              	.LVL11:
  38:Project/yin.c **** 			delta = buffer[i] - buffer[(i + tau)];
 110              		.loc 1 38 9 is_stmt 0 view .LVU32
 111 0050 0023     		movs	r3, #0
  38:Project/yin.c **** 			delta = buffer[i] - buffer[(i + tau)];
 112              		.loc 1 38 3 view .LVU33
 113 0052 F0E7     		b	.L3
 114              	.LVL12:
 115              	.L7:
ARM GAS  /var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cco38zsL.s 			page 4


  41:Project/yin.c **** 		}
  42:Project/yin.c **** 	}
  43:Project/yin.c **** }
 116              		.loc 1 43 1 view .LVU34
 117 0054 10BD     		pop	{r4, pc}
 118              		.loc 1 43 1 view .LVU35
 119              		.cfi_endproc
 120              	.LFE126:
 122              		.section	.text.Yin_cumulativeMeanNormalizedDifference,"ax",%progbits
 123              		.align	1
 124              		.global	Yin_cumulativeMeanNormalizedDifference
 125              		.syntax unified
 126              		.thumb
 127              		.thumb_func
 128              		.fpu fpv4-sp-d16
 130              	Yin_cumulativeMeanNormalizedDifference:
 131              	.LVL13:
 132              	.LFB127:
  44:Project/yin.c **** 
  45:Project/yin.c **** /**
  46:Project/yin.c ****  * Step 2: Calculate the cumulative mean on the normalised difference calculated in step 1
  47:Project/yin.c ****  * @param yin #Yin structure with information about the signal
  48:Project/yin.c ****  *
  49:Project/yin.c ****  * This goes through the Yin autocorellation values and finds out roughly where shift is which 
  50:Project/yin.c ****  * produced the smallest difference
  51:Project/yin.c ****  */
  52:Project/yin.c **** void Yin_cumulativeMeanNormalizedDifference(Yin *yin){
 133              		.loc 1 52 54 is_stmt 1 view -0
 134              		.cfi_startproc
 135              		@ args = 0, pretend = 0, frame = 0
 136              		@ frame_needed = 0, uses_anonymous_args = 0
 137              		@ link register save eliminated.
  53:Project/yin.c **** 	int16_t tau;
 138              		.loc 1 53 2 view .LVU37
  54:Project/yin.c **** 	float runningSum = 0;
 139              		.loc 1 54 2 view .LVU38
  55:Project/yin.c **** 	yin->yinBuffer[0] = 1;
 140              		.loc 1 55 2 view .LVU39
 141              		.loc 1 55 20 is_stmt 0 view .LVU40
 142 0000 4FF07E53 		mov	r3, #1065353216
 143 0004 4360     		str	r3, [r0, #4]	@ float
  56:Project/yin.c ****   
  57:Project/yin.c **** 
  58:Project/yin.c **** 	/* Sum all the values in the autocorellation buffer and nomalise the result, replacing
  59:Project/yin.c **** 	 * the value in the autocorellation buffer with a cumulative mean of the normalised difference */
  60:Project/yin.c **** 	for (tau = 1; tau < yin->halfBufferSize; tau++) {
 144              		.loc 1 60 2 is_stmt 1 view .LVU41
 145              	.LVL14:
  54:Project/yin.c **** 	yin->yinBuffer[0] = 1;
 146              		.loc 1 54 8 is_stmt 0 view .LVU42
 147 0006 9FED0D7A 		vldr.32	s14, .L11
 148              		.loc 1 60 11 view .LVU43
 149 000a 0123     		movs	r3, #1
 150              		.loc 1 60 2 view .LVU44
 151 000c 11E0     		b	.L9
 152              	.LVL15:
 153              	.L10:
ARM GAS  /var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cco38zsL.s 			page 5


  61:Project/yin.c **** 		runningSum += yin->yinBuffer[tau];
 154              		.loc 1 61 3 is_stmt 1 discriminator 3 view .LVU45
 155              		.loc 1 61 31 is_stmt 0 discriminator 3 view .LVU46
 156 000e 00EB8302 		add	r2, r0, r3, lsl #2
 157 0012 D2ED017A 		vldr.32	s15, [r2, #4]
 158              		.loc 1 61 14 discriminator 3 view .LVU47
 159 0016 37EE277A 		vadd.f32	s14, s14, s15
 160              	.LVL16:
  62:Project/yin.c **** 		yin->yinBuffer[tau] *= tau / runningSum;
 161              		.loc 1 62 3 is_stmt 1 discriminator 3 view .LVU48
 162              		.loc 1 62 30 is_stmt 0 discriminator 3 view .LVU49
 163 001a 06EE903A 		vmov	s13, r3	@ int
 164 001e B8EEE66A 		vcvt.f32.s32	s12, s13
 165 0022 C6EE076A 		vdiv.f32	s13, s12, s14
 166              		.loc 1 62 23 discriminator 3 view .LVU50
 167 0026 67EEA67A 		vmul.f32	s15, s15, s13
 168 002a C2ED017A 		vstr.32	s15, [r2, #4]
  60:Project/yin.c **** 		runningSum += yin->yinBuffer[tau];
 169              		.loc 1 60 43 is_stmt 1 discriminator 3 view .LVU51
  60:Project/yin.c **** 		runningSum += yin->yinBuffer[tau];
 170              		.loc 1 60 46 is_stmt 0 discriminator 3 view .LVU52
 171 002e 0133     		adds	r3, r3, #1
 172              	.LVL17:
  60:Project/yin.c **** 		runningSum += yin->yinBuffer[tau];
 173              		.loc 1 60 46 discriminator 3 view .LVU53
 174 0030 1BB2     		sxth	r3, r3
 175              	.LVL18:
 176              	.L9:
  60:Project/yin.c **** 		runningSum += yin->yinBuffer[tau];
 177              		.loc 1 60 16 is_stmt 1 discriminator 1 view .LVU54
  60:Project/yin.c **** 		runningSum += yin->yinBuffer[tau];
 178              		.loc 1 60 25 is_stmt 0 discriminator 1 view .LVU55
 179 0032 B0F90220 		ldrsh	r2, [r0, #2]
  60:Project/yin.c **** 		runningSum += yin->yinBuffer[tau];
 180              		.loc 1 60 2 discriminator 1 view .LVU56
 181 0036 9A42     		cmp	r2, r3
 182 0038 E9DC     		bgt	.L10
  63:Project/yin.c **** 	}
  64:Project/yin.c **** }
 183              		.loc 1 64 1 view .LVU57
 184 003a 7047     		bx	lr
 185              	.L12:
 186              		.align	2
 187              	.L11:
 188 003c 00000000 		.word	0
 189              		.cfi_endproc
 190              	.LFE127:
 192              		.section	.text.Yin_absoluteThreshold,"ax",%progbits
 193              		.align	1
 194              		.global	Yin_absoluteThreshold
 195              		.syntax unified
 196              		.thumb
 197              		.thumb_func
 198              		.fpu fpv4-sp-d16
 200              	Yin_absoluteThreshold:
 201              	.LVL19:
 202              	.LFB128:
ARM GAS  /var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cco38zsL.s 			page 6


  65:Project/yin.c **** 
  66:Project/yin.c **** /**
  67:Project/yin.c ****  * Step 3: Search through the normalised cumulative mean array and find values that are over the th
  68:Project/yin.c ****  * @return Shift (tau) which caused the best approximate autocorellation. -1 if no suitable value i
  69:Project/yin.c ****  */
  70:Project/yin.c **** int16_t Yin_absoluteThreshold(Yin *yin){
 203              		.loc 1 70 40 is_stmt 1 view -0
 204              		.cfi_startproc
 205              		@ args = 0, pretend = 0, frame = 0
 206              		@ frame_needed = 0, uses_anonymous_args = 0
 207              		@ link register save eliminated.
 208              		.loc 1 70 40 is_stmt 0 view .LVU59
 209 0000 0346     		mov	r3, r0
  71:Project/yin.c **** 	int16_t tau;
 210              		.loc 1 71 2 is_stmt 1 view .LVU60
  72:Project/yin.c **** 
  73:Project/yin.c **** 	/* Search through the array of cumulative mean values, and look for ones that are over the thresho
  74:Project/yin.c **** 	 * The first two positions in yinBuffer are always so start at the third (index 2) */
  75:Project/yin.c **** 	for (tau = 2; tau < yin->halfBufferSize ; tau++) {
 211              		.loc 1 75 2 view .LVU61
 212              	.LVL20:
 213              		.loc 1 75 11 is_stmt 0 view .LVU62
 214 0002 0220     		movs	r0, #2
 215              	.LVL21:
 216              		.loc 1 75 2 view .LVU63
 217 0004 30E0     		b	.L14
 218              	.LVL22:
 219              	.L18:
  76:Project/yin.c **** 		if (yin->yinBuffer[tau] < yin->threshold) {
  77:Project/yin.c **** 			while (tau + 1 < yin->halfBufferSize && yin->yinBuffer[tau + 1] < yin->yinBuffer[tau]) {
  78:Project/yin.c **** 				tau++;
 220              		.loc 1 78 5 is_stmt 1 view .LVU64
 221              		.loc 1 78 8 is_stmt 0 view .LVU65
 222 0006 0130     		adds	r0, r0, #1
 223              	.LVL23:
 224              		.loc 1 78 8 view .LVU66
 225 0008 00B2     		sxth	r0, r0
 226              	.LVL24:
 227              	.L15:
  77:Project/yin.c **** 				tau++;
 228              		.loc 1 77 10 is_stmt 1 view .LVU67
  77:Project/yin.c **** 				tau++;
 229              		.loc 1 77 15 is_stmt 0 view .LVU68
 230 000a 8446     		mov	ip, r0
 231 000c 411C     		adds	r1, r0, #1
  77:Project/yin.c **** 				tau++;
 232              		.loc 1 77 10 view .LVU69
 233 000e 9142     		cmp	r1, r2
 234 0010 0CDA     		bge	.L17
  77:Project/yin.c **** 				tau++;
 235              		.loc 1 77 58 discriminator 1 view .LVU70
 236 0012 03EB8101 		add	r1, r3, r1, lsl #2
 237 0016 91ED017A 		vldr.32	s14, [r1, #4]
  77:Project/yin.c **** 				tau++;
 238              		.loc 1 77 84 discriminator 1 view .LVU71
 239 001a 03EB8001 		add	r1, r3, r0, lsl #2
 240 001e D1ED017A 		vldr.32	s15, [r1, #4]
ARM GAS  /var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cco38zsL.s 			page 7


  77:Project/yin.c **** 				tau++;
 241              		.loc 1 77 41 discriminator 1 view .LVU72
 242 0022 B4EEE77A 		vcmpe.f32	s14, s15
 243 0026 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 244 002a ECD4     		bmi	.L18
 245              	.L17:
  79:Project/yin.c **** 			}
  80:Project/yin.c **** 			/* found tau, exit loop and return
  81:Project/yin.c **** 			 * store the probability
  82:Project/yin.c **** 			 * From the YIN paper: The yin->threshold determines the list of
  83:Project/yin.c **** 			 * candidates admitted to the set, and can be interpreted as the
  84:Project/yin.c **** 			 * proportion of aperiodic power tolerated
  85:Project/yin.c **** 			 * within a periodic signal.
  86:Project/yin.c **** 			 *
  87:Project/yin.c **** 			 * Since we want the periodicity and and not aperiodicity:
  88:Project/yin.c **** 			 * periodicity = 1 - aperiodicity */
  89:Project/yin.c **** 			yin->probability = 1 - yin->yinBuffer[tau];
 246              		.loc 1 89 4 is_stmt 1 view .LVU73
 247              		.loc 1 89 41 is_stmt 0 view .LVU74
 248 002c 03EB8C0C 		add	ip, r3, ip, lsl #2
 249 0030 9CED017A 		vldr.32	s14, [ip, #4]
 250              		.loc 1 89 25 view .LVU75
 251 0034 F7EE007A 		vmov.f32	s15, #1.0e+0
 252 0038 77EEC77A 		vsub.f32	s15, s15, s14
 253              		.loc 1 89 21 view .LVU76
 254 003c 03F60401 		addw	r1, r3, #2052
 255 0040 C1ED007A 		vstr.32	s15, [r1]
  90:Project/yin.c **** 			break;
 256              		.loc 1 90 4 is_stmt 1 view .LVU77
 257              	.L19:
  91:Project/yin.c **** 		}
  92:Project/yin.c **** 	}
  93:Project/yin.c **** 
  94:Project/yin.c **** 	/* if no pitch found, tau => -1 */
  95:Project/yin.c **** 	if (tau == yin->halfBufferSize || yin->yinBuffer[tau] >= yin->threshold) {
 258              		.loc 1 95 2 view .LVU78
 259              		.loc 1 95 5 is_stmt 0 view .LVU79
 260 0044 8242     		cmp	r2, r0
 261 0046 21D0     		beq	.L21
 262              		.loc 1 95 50 discriminator 1 view .LVU80
 263 0048 03EB8002 		add	r2, r3, r0, lsl #2
 264 004c 92ED017A 		vldr.32	s14, [r2, #4]
 265              		.loc 1 95 62 discriminator 1 view .LVU81
 266 0050 03F60802 		addw	r2, r3, #2056
 267 0054 D2ED007A 		vldr.32	s15, [r2]
 268              		.loc 1 95 33 discriminator 1 view .LVU82
 269 0058 B4EEE77A 		vcmpe.f32	s14, s15
 270 005c F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 271 0060 14DA     		bge	.L21
 272              	.LVL25:
 273              	.L22:
  96:Project/yin.c **** 		tau = -1;
  97:Project/yin.c **** 		yin->probability = 0;
  98:Project/yin.c **** 	}
  99:Project/yin.c **** 
 100:Project/yin.c **** 	return tau;
 274              		.loc 1 100 2 is_stmt 1 view .LVU83
ARM GAS  /var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cco38zsL.s 			page 8


 101:Project/yin.c **** }
 275              		.loc 1 101 1 is_stmt 0 view .LVU84
 276 0062 7047     		bx	lr
 277              	.LVL26:
 278              	.L24:
  75:Project/yin.c **** 		if (yin->yinBuffer[tau] < yin->threshold) {
 279              		.loc 1 75 44 is_stmt 1 discriminator 2 view .LVU85
  75:Project/yin.c **** 		if (yin->yinBuffer[tau] < yin->threshold) {
 280              		.loc 1 75 47 is_stmt 0 discriminator 2 view .LVU86
 281 0064 0130     		adds	r0, r0, #1
 282              	.LVL27:
  75:Project/yin.c **** 		if (yin->yinBuffer[tau] < yin->threshold) {
 283              		.loc 1 75 47 discriminator 2 view .LVU87
 284 0066 00B2     		sxth	r0, r0
 285              	.LVL28:
 286              	.L14:
  75:Project/yin.c **** 		if (yin->yinBuffer[tau] < yin->threshold) {
 287              		.loc 1 75 16 is_stmt 1 discriminator 1 view .LVU88
  75:Project/yin.c **** 		if (yin->yinBuffer[tau] < yin->threshold) {
 288              		.loc 1 75 25 is_stmt 0 discriminator 1 view .LVU89
 289 0068 B3F90220 		ldrsh	r2, [r3, #2]
  75:Project/yin.c **** 		if (yin->yinBuffer[tau] < yin->threshold) {
 290              		.loc 1 75 2 discriminator 1 view .LVU90
 291 006c 8242     		cmp	r2, r0
 292 006e E9DD     		ble	.L19
  76:Project/yin.c **** 			while (tau + 1 < yin->halfBufferSize && yin->yinBuffer[tau + 1] < yin->yinBuffer[tau]) {
 293              		.loc 1 76 3 is_stmt 1 view .LVU91
  76:Project/yin.c **** 			while (tau + 1 < yin->halfBufferSize && yin->yinBuffer[tau + 1] < yin->yinBuffer[tau]) {
 294              		.loc 1 76 21 is_stmt 0 view .LVU92
 295 0070 03EB8001 		add	r1, r3, r0, lsl #2
 296 0074 91ED017A 		vldr.32	s14, [r1, #4]
  76:Project/yin.c **** 			while (tau + 1 < yin->halfBufferSize && yin->yinBuffer[tau + 1] < yin->yinBuffer[tau]) {
 297              		.loc 1 76 32 view .LVU93
 298 0078 03F60801 		addw	r1, r3, #2056
 299 007c D1ED007A 		vldr.32	s15, [r1]
  76:Project/yin.c **** 			while (tau + 1 < yin->halfBufferSize && yin->yinBuffer[tau + 1] < yin->yinBuffer[tau]) {
 300              		.loc 1 76 6 view .LVU94
 301 0080 B4EEE77A 		vcmpe.f32	s14, s15
 302 0084 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 303 0088 ECD5     		bpl	.L24
 304 008a BEE7     		b	.L15
 305              	.L21:
  96:Project/yin.c **** 		yin->probability = 0;
 306              		.loc 1 96 3 is_stmt 1 view .LVU95
 307              	.LVL29:
  97:Project/yin.c **** 	}
 308              		.loc 1 97 3 view .LVU96
  97:Project/yin.c **** 	}
 309              		.loc 1 97 20 is_stmt 0 view .LVU97
 310 008c 03F60403 		addw	r3, r3, #2052
 311              	.LVL30:
  97:Project/yin.c **** 	}
 312              		.loc 1 97 20 view .LVU98
 313 0090 0022     		movs	r2, #0
 314 0092 1A60     		str	r2, [r3]	@ float
  96:Project/yin.c **** 		yin->probability = 0;
 315              		.loc 1 96 7 view .LVU99
ARM GAS  /var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cco38zsL.s 			page 9


 316 0094 4FF0FF30 		mov	r0, #-1
 317 0098 E3E7     		b	.L22
 318              		.cfi_endproc
 319              	.LFE128:
 321              		.section	.text.Yin_parabolicInterpolation,"ax",%progbits
 322              		.align	1
 323              		.global	Yin_parabolicInterpolation
 324              		.syntax unified
 325              		.thumb
 326              		.thumb_func
 327              		.fpu fpv4-sp-d16
 329              	Yin_parabolicInterpolation:
 330              	.LVL31:
 331              	.LFB129:
 102:Project/yin.c **** 
 103:Project/yin.c **** /**
 104:Project/yin.c ****  * Step 5: Interpolate the shift value (tau) to improve the pitch estimate.
 105:Project/yin.c ****  * @param  yin         [description]
 106:Project/yin.c ****  * @param  tauEstimate [description]
 107:Project/yin.c ****  * @return             [description]
 108:Project/yin.c ****  *
 109:Project/yin.c ****  * The 'best' shift value for autocorellation is most likely not an interger shift of the signal.
 110:Project/yin.c ****  * As we only autocorellated using integer shifts we should check that there isn't a better fractio
 111:Project/yin.c ****  * shift value.
 112:Project/yin.c ****  */
 113:Project/yin.c **** float Yin_parabolicInterpolation(Yin *yin, int16_t tauEstimate) {
 332              		.loc 1 113 65 is_stmt 1 view -0
 333              		.cfi_startproc
 334              		@ args = 0, pretend = 0, frame = 0
 335              		@ frame_needed = 0, uses_anonymous_args = 0
 336              		@ link register save eliminated.
 114:Project/yin.c **** 	float betterTau;
 337              		.loc 1 114 2 view .LVU101
 115:Project/yin.c **** 	int16_t x0;
 338              		.loc 1 115 2 view .LVU102
 116:Project/yin.c **** 	int16_t x2;
 339              		.loc 1 116 2 view .LVU103
 117:Project/yin.c **** 	
 118:Project/yin.c **** 	/* Calculate the first polynomial coeffcient based on the current estimate of tau */
 119:Project/yin.c **** 	if (tauEstimate < 1) {
 340              		.loc 1 119 2 view .LVU104
 341              		.loc 1 119 5 is_stmt 0 view .LVU105
 342 0000 0029     		cmp	r1, #0
 343              	.LVL32:
 344              		.loc 1 119 5 view .LVU106
 345 0002 2ADD     		ble	.L35
 120:Project/yin.c **** 		x0 = tauEstimate;
 121:Project/yin.c **** 	} 
 122:Project/yin.c **** 	else {
 123:Project/yin.c **** 		x0 = tauEstimate - 1;
 346              		.loc 1 123 3 is_stmt 1 view .LVU107
 347              		.loc 1 123 20 is_stmt 0 view .LVU108
 348 0004 4B1E     		subs	r3, r1, #1
 349              		.loc 1 123 6 view .LVU109
 350 0006 1BB2     		sxth	r3, r3
 351              	.LVL33:
 352              	.L26:
ARM GAS  /var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cco38zsL.s 			page 10


 124:Project/yin.c **** 	}
 125:Project/yin.c **** 
 126:Project/yin.c **** 	/* Calculate the second polynomial coeffcient based on the current estimate of tau */
 127:Project/yin.c **** 	if (tauEstimate + 1 < yin->halfBufferSize) {
 353              		.loc 1 127 2 is_stmt 1 view .LVU110
 354              		.loc 1 127 18 is_stmt 0 view .LVU111
 355 0008 4A1C     		adds	r2, r1, #1
 356              		.loc 1 127 27 view .LVU112
 357 000a B0F902C0 		ldrsh	ip, [r0, #2]
 358              		.loc 1 127 5 view .LVU113
 359 000e 6245     		cmp	r2, ip
 360 0010 25DA     		bge	.L36
 128:Project/yin.c **** 		x2 = tauEstimate + 1;
 361              		.loc 1 128 3 is_stmt 1 view .LVU114
 362              		.loc 1 128 6 is_stmt 0 view .LVU115
 363 0012 12B2     		sxth	r2, r2
 364              	.LVL34:
 365              	.L27:
 129:Project/yin.c **** 	} 
 130:Project/yin.c **** 	else {
 131:Project/yin.c **** 		x2 = tauEstimate;
 132:Project/yin.c **** 	}
 133:Project/yin.c **** 
 134:Project/yin.c **** 	/* Algorithm to parabolically interpolate the shift value tau to find a better estimate */
 135:Project/yin.c **** 	if (x0 == tauEstimate) {
 366              		.loc 1 135 2 is_stmt 1 view .LVU116
 367              		.loc 1 135 5 is_stmt 0 view .LVU117
 368 0014 8B42     		cmp	r3, r1
 369 0016 24D0     		beq	.L41
 136:Project/yin.c **** 		if (yin->yinBuffer[tauEstimate] <= yin->yinBuffer[x2]) {
 137:Project/yin.c **** 			betterTau = tauEstimate;
 138:Project/yin.c **** 		} 
 139:Project/yin.c **** 		else {
 140:Project/yin.c **** 			betterTau = x2;
 141:Project/yin.c **** 		}
 142:Project/yin.c **** 	} 
 143:Project/yin.c **** 	else if (x2 == tauEstimate) {
 370              		.loc 1 143 7 is_stmt 1 view .LVU118
 371              		.loc 1 143 10 is_stmt 0 view .LVU119
 372 0018 8A42     		cmp	r2, r1
 373 001a 39D0     		beq	.L42
 374              	.LBB2:
 144:Project/yin.c **** 		if (yin->yinBuffer[tauEstimate] <= yin->yinBuffer[x0]) {
 145:Project/yin.c **** 			betterTau = tauEstimate;
 146:Project/yin.c **** 		} 
 147:Project/yin.c **** 		else {
 148:Project/yin.c **** 			betterTau = x0;
 149:Project/yin.c **** 		}
 150:Project/yin.c **** 	} 
 151:Project/yin.c **** 	else {
 152:Project/yin.c **** 		float s0, s1, s2;
 375              		.loc 1 152 3 is_stmt 1 view .LVU120
 153:Project/yin.c **** 		s0 = yin->yinBuffer[x0];
 376              		.loc 1 153 3 view .LVU121
 377              		.loc 1 153 6 is_stmt 0 view .LVU122
 378 001c 00EB8303 		add	r3, r0, r3, lsl #2
 379              	.LVL35:
ARM GAS  /var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cco38zsL.s 			page 11


 380              		.loc 1 153 6 view .LVU123
 381 0020 D3ED016A 		vldr.32	s13, [r3, #4]
 382              	.LVL36:
 154:Project/yin.c **** 		s1 = yin->yinBuffer[tauEstimate];
 383              		.loc 1 154 3 is_stmt 1 view .LVU124
 384              		.loc 1 154 6 is_stmt 0 view .LVU125
 385 0024 00EB8103 		add	r3, r0, r1, lsl #2
 386 0028 93ED017A 		vldr.32	s14, [r3, #4]
 387              	.LVL37:
 155:Project/yin.c **** 		s2 = yin->yinBuffer[x2];
 388              		.loc 1 155 3 is_stmt 1 view .LVU126
 389              		.loc 1 155 6 is_stmt 0 view .LVU127
 390 002c 00EB8200 		add	r0, r0, r2, lsl #2
 391              	.LVL38:
 392              		.loc 1 155 6 view .LVU128
 393 0030 D0ED017A 		vldr.32	s15, [r0, #4]
 394              	.LVL39:
 156:Project/yin.c **** 		// fixed AUBIO implementation, thanks to Karl Helgason:
 157:Project/yin.c **** 		// (2.0f * s1 - s2 - s0) was incorrectly multiplied with -1
 158:Project/yin.c **** 		betterTau = tauEstimate + (s2 - s0) / (2 * (2 * s1 - s2 - s0));
 395              		.loc 1 158 3 is_stmt 1 view .LVU129
 396              		.loc 1 158 27 is_stmt 0 view .LVU130
 397 0034 06EE101A 		vmov	s12, r1	@ int
 398 0038 B8EEC60A 		vcvt.f32.s32	s0, s12
 399              		.loc 1 158 33 view .LVU131
 400 003c 37EEE66A 		vsub.f32	s12, s15, s13
 401              		.loc 1 158 49 view .LVU132
 402 0040 37EE077A 		vadd.f32	s14, s14, s14
 403              	.LVL40:
 404              		.loc 1 158 54 view .LVU133
 405 0044 77EE677A 		vsub.f32	s15, s14, s15
 406              	.LVL41:
 407              		.loc 1 158 59 view .LVU134
 408 0048 77EEE67A 		vsub.f32	s15, s15, s13
 409              		.loc 1 158 44 view .LVU135
 410 004c 77EEA77A 		vadd.f32	s15, s15, s15
 411              		.loc 1 158 39 view .LVU136
 412 0050 86EE277A 		vdiv.f32	s14, s12, s15
 413              		.loc 1 158 13 view .LVU137
 414 0054 30EE070A 		vadd.f32	s0, s0, s14
 415              	.LVL42:
 416              		.loc 1 158 13 view .LVU138
 417              	.LBE2:
 159:Project/yin.c **** 	}
 160:Project/yin.c **** 
 161:Project/yin.c **** 
 162:Project/yin.c **** 	return betterTau;
 418              		.loc 1 162 2 is_stmt 1 view .LVU139
 163:Project/yin.c **** }
 419              		.loc 1 163 1 is_stmt 0 view .LVU140
 420 0058 7047     		bx	lr
 421              	.LVL43:
 422              	.L35:
 120:Project/yin.c **** 	} 
 423              		.loc 1 120 6 view .LVU141
 424 005a 0B46     		mov	r3, r1
 425 005c D4E7     		b	.L26
ARM GAS  /var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cco38zsL.s 			page 12


 426              	.LVL44:
 427              	.L36:
 131:Project/yin.c **** 	}
 428              		.loc 1 131 6 view .LVU142
 429 005e 0A46     		mov	r2, r1
 430 0060 D8E7     		b	.L27
 431              	.LVL45:
 432              	.L41:
 136:Project/yin.c **** 			betterTau = tauEstimate;
 433              		.loc 1 136 3 is_stmt 1 view .LVU143
 136:Project/yin.c **** 			betterTau = tauEstimate;
 434              		.loc 1 136 21 is_stmt 0 view .LVU144
 435 0062 00EB8103 		add	r3, r0, r1, lsl #2
 436              	.LVL46:
 136:Project/yin.c **** 			betterTau = tauEstimate;
 437              		.loc 1 136 21 view .LVU145
 438 0066 93ED017A 		vldr.32	s14, [r3, #4]
 136:Project/yin.c **** 			betterTau = tauEstimate;
 439              		.loc 1 136 52 view .LVU146
 440 006a 00EB8200 		add	r0, r0, r2, lsl #2
 441              	.LVL47:
 136:Project/yin.c **** 			betterTau = tauEstimate;
 442              		.loc 1 136 52 view .LVU147
 443 006e D0ED017A 		vldr.32	s15, [r0, #4]
 136:Project/yin.c **** 			betterTau = tauEstimate;
 444              		.loc 1 136 6 view .LVU148
 445 0072 B4EEE77A 		vcmpe.f32	s14, s15
 446 0076 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 447 007a 04D8     		bhi	.L39
 137:Project/yin.c **** 		} 
 448              		.loc 1 137 4 is_stmt 1 view .LVU149
 137:Project/yin.c **** 		} 
 449              		.loc 1 137 14 is_stmt 0 view .LVU150
 450 007c 07EE901A 		vmov	s15, r1	@ int
 451 0080 B8EEE70A 		vcvt.f32.s32	s0, s15
 452              	.LVL48:
 137:Project/yin.c **** 		} 
 453              		.loc 1 137 14 view .LVU151
 454 0084 7047     		bx	lr
 455              	.LVL49:
 456              	.L39:
 140:Project/yin.c **** 		}
 457              		.loc 1 140 4 is_stmt 1 view .LVU152
 140:Project/yin.c **** 		}
 458              		.loc 1 140 14 is_stmt 0 view .LVU153
 459 0086 07EE902A 		vmov	s15, r2	@ int
 460 008a B8EEE70A 		vcvt.f32.s32	s0, s15
 461              	.LVL50:
 140:Project/yin.c **** 		}
 462              		.loc 1 140 14 view .LVU154
 463 008e 7047     		bx	lr
 464              	.LVL51:
 465              	.L42:
 144:Project/yin.c **** 			betterTau = tauEstimate;
 466              		.loc 1 144 3 is_stmt 1 view .LVU155
 144:Project/yin.c **** 			betterTau = tauEstimate;
 467              		.loc 1 144 21 is_stmt 0 view .LVU156
ARM GAS  /var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cco38zsL.s 			page 13


 468 0090 00EB8102 		add	r2, r0, r1, lsl #2
 469              	.LVL52:
 144:Project/yin.c **** 			betterTau = tauEstimate;
 470              		.loc 1 144 21 view .LVU157
 471 0094 92ED017A 		vldr.32	s14, [r2, #4]
 144:Project/yin.c **** 			betterTau = tauEstimate;
 472              		.loc 1 144 52 view .LVU158
 473 0098 00EB8300 		add	r0, r0, r3, lsl #2
 474              	.LVL53:
 144:Project/yin.c **** 			betterTau = tauEstimate;
 475              		.loc 1 144 52 view .LVU159
 476 009c D0ED017A 		vldr.32	s15, [r0, #4]
 144:Project/yin.c **** 			betterTau = tauEstimate;
 477              		.loc 1 144 6 view .LVU160
 478 00a0 B4EEE77A 		vcmpe.f32	s14, s15
 479 00a4 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 480 00a8 04D8     		bhi	.L40
 145:Project/yin.c **** 		} 
 481              		.loc 1 145 4 is_stmt 1 view .LVU161
 145:Project/yin.c **** 		} 
 482              		.loc 1 145 14 is_stmt 0 view .LVU162
 483 00aa 07EE901A 		vmov	s15, r1	@ int
 484 00ae B8EEE70A 		vcvt.f32.s32	s0, s15
 485              	.LVL54:
 145:Project/yin.c **** 		} 
 486              		.loc 1 145 14 view .LVU163
 487 00b2 7047     		bx	lr
 488              	.LVL55:
 489              	.L40:
 148:Project/yin.c **** 		}
 490              		.loc 1 148 4 is_stmt 1 view .LVU164
 148:Project/yin.c **** 		}
 491              		.loc 1 148 14 is_stmt 0 view .LVU165
 492 00b4 07EE903A 		vmov	s15, r3	@ int
 493 00b8 B8EEE70A 		vcvt.f32.s32	s0, s15
 494              	.LVL56:
 148:Project/yin.c **** 		}
 495              		.loc 1 148 14 view .LVU166
 496 00bc 7047     		bx	lr
 497              		.cfi_endproc
 498              	.LFE129:
 500              		.section	.text.Yin_getPitch,"ax",%progbits
 501              		.align	1
 502              		.global	Yin_getPitch
 503              		.syntax unified
 504              		.thumb
 505              		.thumb_func
 506              		.fpu fpv4-sp-d16
 508              	Yin_getPitch:
 509              	.LVL57:
 510              	.LFB130:
 164:Project/yin.c **** 
 165:Project/yin.c **** 
 166:Project/yin.c **** 
 167:Project/yin.c **** 
 168:Project/yin.c **** 
 169:Project/yin.c **** /* ------------------------------------------------------------------------------------------
ARM GAS  /var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cco38zsL.s 			page 14


 170:Project/yin.c **** ---------------------------------------------------------------------------- PUBLIC FUNCTIONS
 171:Project/yin.c **** -------------------------------------------------------------------------------------------*/
 172:Project/yin.c **** 
 173:Project/yin.c **** /**
 174:Project/yin.c ****  * Runs the Yin pitch detection algortihm
 175:Project/yin.c ****  * @param  yin    Initialised Yin object
 176:Project/yin.c ****  * @param  buffer Buffer of samples to analyse
 177:Project/yin.c ****  * @return        Fundamental frequency of the signal in Hz. Returns -1 if pitch can't be found
 178:Project/yin.c ****  */
 179:Project/yin.c **** float Yin_getPitch(float* buffer, uint16_t bufferSize, float threshold, bool fft){
 511              		.loc 1 179 82 is_stmt 1 view -0
 512              		.cfi_startproc
 513              		@ args = 0, pretend = 0, frame = 8
 514              		@ frame_needed = 0, uses_anonymous_args = 0
 180:Project/yin.c **** 
 181:Project/yin.c ****   if(bufferSize > MAXIMUM_SAMPLESIZE) {
 515              		.loc 1 181 3 view .LVU168
 516              		.loc 1 181 5 is_stmt 0 view .LVU169
 517 0000 B1F5806F 		cmp	r1, #1024
 518 0004 02D9     		bls	.L51
 182:Project/yin.c ****     return -1;
 519              		.loc 1 182 12 view .LVU170
 520 0006 BFEE000A 		vmov.f32	s0, #-1.0e+0
 521              	.LVL58:
 183:Project/yin.c ****   }
 184:Project/yin.c **** 
 185:Project/yin.c **** 	yinobject.bufferSize = bufferSize;
 186:Project/yin.c **** 	yinobject.halfBufferSize = bufferSize / 2;
 187:Project/yin.c **** 	yinobject.probability = 0.0;
 188:Project/yin.c **** 	yinobject.threshold = threshold;
 189:Project/yin.c **** 
 190:Project/yin.c **** 	volatile int16_t tauEstimate = -1;
 191:Project/yin.c **** 	float pitchInHertz = -1;
 192:Project/yin.c **** 	
 193:Project/yin.c **** 	/* Step 1: Calculates the squared difference of the signal with a shifted version of itself. */
 194:Project/yin.c ****   Yin_difference(&yinobject, buffer);
 195:Project/yin.c **** 
 196:Project/yin.c ****   
 197:Project/yin.c ****   
 198:Project/yin.c ****   /* Step 2: Calculate the cumulative mean on the normalised difference calculated in step 1 */
 199:Project/yin.c **** 	Yin_cumulativeMeanNormalizedDifference(&yinobject);
 200:Project/yin.c **** 	
 201:Project/yin.c **** 	/* Step 3: Search through the normalised cumulative mean array and find values that are over the t
 202:Project/yin.c **** 	tauEstimate = Yin_absoluteThreshold(&yinobject);
 203:Project/yin.c **** 	
 204:Project/yin.c **** 	/* Step 5: Interpolate the shift value (tau) to improve the pitch estimate. */
 205:Project/yin.c **** 	if(tauEstimate != -1){
 206:Project/yin.c **** 		pitchInHertz = YIN_SAMPLING_RATE / Yin_parabolicInterpolation(&yinobject, tauEstimate);
 207:Project/yin.c **** 	}
 208:Project/yin.c **** 	
 209:Project/yin.c **** 	return pitchInHertz;
 210:Project/yin.c **** }
 522              		.loc 1 210 1 view .LVU171
 523 000a 7047     		bx	lr
 524              	.LVL59:
 525              	.L51:
 179:Project/yin.c **** 
ARM GAS  /var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cco38zsL.s 			page 15


 526              		.loc 1 179 82 view .LVU172
 527 000c 10B5     		push	{r4, lr}
 528              	.LCFI1:
 529              		.cfi_def_cfa_offset 8
 530              		.cfi_offset 4, -8
 531              		.cfi_offset 14, -4
 532 000e 82B0     		sub	sp, sp, #8
 533              	.LCFI2:
 534              		.cfi_def_cfa_offset 16
 185:Project/yin.c **** 	yinobject.halfBufferSize = bufferSize / 2;
 535              		.loc 1 185 2 is_stmt 1 view .LVU173
 185:Project/yin.c **** 	yinobject.halfBufferSize = bufferSize / 2;
 536              		.loc 1 185 23 is_stmt 0 view .LVU174
 537 0010 194C     		ldr	r4, .L52
 538 0012 2180     		strh	r1, [r4]	@ movhi
 186:Project/yin.c **** 	yinobject.probability = 0.0;
 539              		.loc 1 186 2 is_stmt 1 view .LVU175
 186:Project/yin.c **** 	yinobject.probability = 0.0;
 540              		.loc 1 186 27 is_stmt 0 view .LVU176
 541 0014 4908     		lsrs	r1, r1, #1
 542              	.LVL60:
 186:Project/yin.c **** 	yinobject.probability = 0.0;
 543              		.loc 1 186 27 view .LVU177
 544 0016 6180     		strh	r1, [r4, #2]	@ movhi
 187:Project/yin.c **** 	yinobject.threshold = threshold;
 545              		.loc 1 187 2 is_stmt 1 view .LVU178
 187:Project/yin.c **** 	yinobject.threshold = threshold;
 546              		.loc 1 187 24 is_stmt 0 view .LVU179
 547 0018 04F60403 		addw	r3, r4, #2052
 548 001c 0022     		movs	r2, #0
 549              	.LVL61:
 187:Project/yin.c **** 	yinobject.threshold = threshold;
 550              		.loc 1 187 24 view .LVU180
 551 001e 1A60     		str	r2, [r3]	@ float
 188:Project/yin.c **** 
 552              		.loc 1 188 2 is_stmt 1 view .LVU181
 188:Project/yin.c **** 
 553              		.loc 1 188 22 is_stmt 0 view .LVU182
 554 0020 04F60803 		addw	r3, r4, #2056
 555 0024 83ED000A 		vstr.32	s0, [r3]
 190:Project/yin.c **** 	float pitchInHertz = -1;
 556              		.loc 1 190 2 is_stmt 1 view .LVU183
 190:Project/yin.c **** 	float pitchInHertz = -1;
 557              		.loc 1 190 19 is_stmt 0 view .LVU184
 558 0028 4FF6FF73 		movw	r3, #65535
 559 002c ADF80630 		strh	r3, [sp, #6]	@ movhi
 191:Project/yin.c **** 	
 560              		.loc 1 191 2 is_stmt 1 view .LVU185
 561              	.LVL62:
 194:Project/yin.c **** 
 562              		.loc 1 194 3 view .LVU186
 563 0030 0146     		mov	r1, r0
 564 0032 2046     		mov	r0, r4
 565              	.LVL63:
 194:Project/yin.c **** 
 566              		.loc 1 194 3 is_stmt 0 view .LVU187
 567 0034 FFF7FEFF 		bl	Yin_difference
ARM GAS  /var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cco38zsL.s 			page 16


 568              	.LVL64:
 199:Project/yin.c **** 	
 569              		.loc 1 199 2 is_stmt 1 view .LVU188
 570 0038 2046     		mov	r0, r4
 571 003a FFF7FEFF 		bl	Yin_cumulativeMeanNormalizedDifference
 572              	.LVL65:
 202:Project/yin.c **** 	
 573              		.loc 1 202 2 view .LVU189
 202:Project/yin.c **** 	
 574              		.loc 1 202 16 is_stmt 0 view .LVU190
 575 003e 2046     		mov	r0, r4
 576 0040 FFF7FEFF 		bl	Yin_absoluteThreshold
 577              	.LVL66:
 202:Project/yin.c **** 	
 578              		.loc 1 202 14 view .LVU191
 579 0044 ADF80600 		strh	r0, [sp, #6]	@ movhi
 205:Project/yin.c **** 		pitchInHertz = YIN_SAMPLING_RATE / Yin_parabolicInterpolation(&yinobject, tauEstimate);
 580              		.loc 1 205 2 is_stmt 1 view .LVU192
 205:Project/yin.c **** 		pitchInHertz = YIN_SAMPLING_RATE / Yin_parabolicInterpolation(&yinobject, tauEstimate);
 581              		.loc 1 205 17 is_stmt 0 view .LVU193
 582 0048 BDF80630 		ldrh	r3, [sp, #6]
 583 004c 1BB2     		sxth	r3, r3
 205:Project/yin.c **** 		pitchInHertz = YIN_SAMPLING_RATE / Yin_parabolicInterpolation(&yinobject, tauEstimate);
 584              		.loc 1 205 4 view .LVU194
 585 004e B3F1FF3F 		cmp	r3, #-1
 586 0052 0DD0     		beq	.L46
 206:Project/yin.c **** 	}
 587              		.loc 1 206 3 is_stmt 1 view .LVU195
 206:Project/yin.c **** 	}
 588              		.loc 1 206 38 is_stmt 0 view .LVU196
 589 0054 BDF80610 		ldrh	r1, [sp, #6]
 590 0058 09B2     		sxth	r1, r1
 591 005a 2046     		mov	r0, r4
 592 005c FFF7FEFF 		bl	Yin_parabolicInterpolation
 593              	.LVL67:
 594 0060 F0EE407A 		vmov.f32	s15, s0
 206:Project/yin.c **** 	}
 595              		.loc 1 206 16 view .LVU197
 596 0064 9FED057A 		vldr.32	s14, .L52+4
 597 0068 87EE270A 		vdiv.f32	s0, s14, s15
 598              	.LVL68:
 599              	.L43:
 600              		.loc 1 210 1 view .LVU198
 601 006c 02B0     		add	sp, sp, #8
 602              	.LCFI3:
 603              		.cfi_remember_state
 604              		.cfi_def_cfa_offset 8
 605              		@ sp needed
 606 006e 10BD     		pop	{r4, pc}
 607              	.LVL69:
 608              	.L46:
 609              	.LCFI4:
 610              		.cfi_restore_state
 191:Project/yin.c **** 	
 611              		.loc 1 191 8 view .LVU199
 612 0070 BFEE000A 		vmov.f32	s0, #-1.0e+0
 613              	.LVL70:
ARM GAS  /var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cco38zsL.s 			page 17


 191:Project/yin.c **** 	
 614              		.loc 1 191 8 view .LVU200
 615 0074 FAE7     		b	.L43
 616              	.L53:
 617 0076 00BF     		.align	2
 618              	.L52:
 619 0078 00000000 		.word	.LANCHOR0
 620 007c 0050C346 		.word	1187205120
 621              		.cfi_endproc
 622              	.LFE130:
 624              		.section	.text.Yin_getProbability,"ax",%progbits
 625              		.align	1
 626              		.global	Yin_getProbability
 627              		.syntax unified
 628              		.thumb
 629              		.thumb_func
 630              		.fpu fpv4-sp-d16
 632              	Yin_getProbability:
 633              	.LFB131:
 211:Project/yin.c **** 
 212:Project/yin.c **** /**
 213:Project/yin.c ****  * Certainty of the pitch found 
 214:Project/yin.c ****  * @param  yin Yin object that has been run over a buffer
 215:Project/yin.c ****  * @return     Returns the certainty of the note found as a decimal (i.e 0.3 is 30%)
 216:Project/yin.c ****  */
 217:Project/yin.c **** float Yin_getProbability(){
 634              		.loc 1 217 27 is_stmt 1 view -0
 635              		.cfi_startproc
 636              		@ args = 0, pretend = 0, frame = 0
 637              		@ frame_needed = 0, uses_anonymous_args = 0
 638              		@ link register save eliminated.
 218:Project/yin.c **** 	return yinobject.probability;
 639              		.loc 1 218 2 view .LVU202
 219:Project/yin.c **** }
 640              		.loc 1 219 1 is_stmt 0 view .LVU203
 641 0000 014B     		ldr	r3, .L55
 642 0002 93ED000A 		vldr.32	s0, [r3]
 643 0006 7047     		bx	lr
 644              	.L56:
 645              		.align	2
 646              	.L55:
 647 0008 04080000 		.word	.LANCHOR0+2052
 648              		.cfi_endproc
 649              	.LFE131:
 651              		.global	yinobject
 652              		.section	.bss.yinobject,"aw",%nobits
 653              		.align	2
 654              		.set	.LANCHOR0,. + 0
 657              	yinobject:
 658 0000 00000000 		.space	2060
 658      00000000 
 658      00000000 
 658      00000000 
 658      00000000 
 659              		.text
 660              	.Letext0:
 661              		.file 2 "/usr/local/Caskroom/gcc-arm-embedded/10-2020-q4-major/gcc-arm-none-eabi-10-2020-q4-major/
ARM GAS  /var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cco38zsL.s 			page 18


 662              		.file 3 "/usr/local/Caskroom/gcc-arm-embedded/10-2020-q4-major/gcc-arm-none-eabi-10-2020-q4-major/
 663              		.file 4 "Project/yin.h"
ARM GAS  /var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cco38zsL.s 			page 19


DEFINED SYMBOLS
                            *ABS*:0000000000000000 yin.c
/var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cco38zsL.s:18     .text.Yin_difference:0000000000000000 $t
/var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cco38zsL.s:26     .text.Yin_difference:0000000000000000 Yin_difference
/var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cco38zsL.s:123    .text.Yin_cumulativeMeanNormalizedDifference:0000000000000000 $t
/var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cco38zsL.s:130    .text.Yin_cumulativeMeanNormalizedDifference:0000000000000000 Yin_cumulativeMeanNormalizedDifference
/var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cco38zsL.s:188    .text.Yin_cumulativeMeanNormalizedDifference:000000000000003c $d
/var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cco38zsL.s:193    .text.Yin_absoluteThreshold:0000000000000000 $t
/var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cco38zsL.s:200    .text.Yin_absoluteThreshold:0000000000000000 Yin_absoluteThreshold
/var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cco38zsL.s:322    .text.Yin_parabolicInterpolation:0000000000000000 $t
/var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cco38zsL.s:329    .text.Yin_parabolicInterpolation:0000000000000000 Yin_parabolicInterpolation
/var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cco38zsL.s:501    .text.Yin_getPitch:0000000000000000 $t
/var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cco38zsL.s:508    .text.Yin_getPitch:0000000000000000 Yin_getPitch
/var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cco38zsL.s:619    .text.Yin_getPitch:0000000000000078 $d
/var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cco38zsL.s:625    .text.Yin_getProbability:0000000000000000 $t
/var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cco38zsL.s:632    .text.Yin_getProbability:0000000000000000 Yin_getProbability
/var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cco38zsL.s:647    .text.Yin_getProbability:0000000000000008 $d
/var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cco38zsL.s:657    .bss.yinobject:0000000000000000 yinobject
/var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cco38zsL.s:653    .bss.yinobject:0000000000000000 $d

NO UNDEFINED SYMBOLS
