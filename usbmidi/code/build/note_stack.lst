ARM GAS  /var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cc00n1aM.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"note_stack.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.NoteStack_RecentNote,"ax",%progbits
  18              		.align	1
  19              		.global	NoteStack_RecentNote
  20              		.arch armv7e-m
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  24              		.fpu fpv4-sp-d16
  26              	NoteStack_RecentNote:
  27              	.LVL0:
  28              	.LFB0:
  29              		.file 1 "Src/note_stack.c"
   1:Src/note_stack.c **** #include "note_stack.h"
   2:Src/note_stack.c **** 
   3:Src/note_stack.c **** uint8_t NoteStack_RecentNote(NoteStack *stack) {
  30              		.loc 1 3 48 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		@ link register save eliminated.
   4:Src/note_stack.c ****   return stack->pool[stack->root_ptr].note;
  35              		.loc 1 4 3 view .LVU1
  36              		.loc 1 4 27 is_stmt 0 view .LVU2
  37 0000 90F83430 		ldrb	r3, [r0, #52]	@ zero_extendqisi2
  38              		.loc 1 4 38 view .LVU3
  39 0004 03EB4303 		add	r3, r3, r3, lsl #1
  40 0008 1844     		add	r0, r0, r3
  41              	.LVL1:
   5:Src/note_stack.c **** }
  42              		.loc 1 5 1 view .LVU4
  43 000a 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
  44 000c 7047     		bx	lr
  45              		.cfi_endproc
  46              	.LFE0:
  48              		.section	.text.NoteStack_RecentVelocity,"ax",%progbits
  49              		.align	1
  50              		.global	NoteStack_RecentVelocity
  51              		.syntax unified
  52              		.thumb
  53              		.thumb_func
  54              		.fpu fpv4-sp-d16
ARM GAS  /var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cc00n1aM.s 			page 2


  56              	NoteStack_RecentVelocity:
  57              	.LVL2:
  58              	.LFB1:
   6:Src/note_stack.c **** uint8_t NoteStack_RecentVelocity(NoteStack *stack) {
  59              		.loc 1 6 52 is_stmt 1 view -0
  60              		.cfi_startproc
  61              		@ args = 0, pretend = 0, frame = 0
  62              		@ frame_needed = 0, uses_anonymous_args = 0
  63              		@ link register save eliminated.
   7:Src/note_stack.c ****   return stack->pool[stack->root_ptr].velocity;
  64              		.loc 1 7 3 view .LVU6
  65              		.loc 1 7 27 is_stmt 0 view .LVU7
  66 0000 90F83430 		ldrb	r3, [r0, #52]	@ zero_extendqisi2
  67              		.loc 1 7 38 view .LVU8
  68 0004 03EB4303 		add	r3, r3, r3, lsl #1
  69 0008 1844     		add	r0, r0, r3
  70              	.LVL3:
   8:Src/note_stack.c **** }
  71              		.loc 1 8 1 view .LVU9
  72 000a 8078     		ldrb	r0, [r0, #2]	@ zero_extendqisi2
  73 000c 7047     		bx	lr
  74              		.cfi_endproc
  75              	.LFE1:
  77              		.section	.text.NoteStack_NoteOff,"ax",%progbits
  78              		.align	1
  79              		.global	NoteStack_NoteOff
  80              		.syntax unified
  81              		.thumb
  82              		.thumb_func
  83              		.fpu fpv4-sp-d16
  85              	NoteStack_NoteOff:
  86              	.LVL4:
  87              	.LFB3:
   9:Src/note_stack.c **** 
  10:Src/note_stack.c **** void NoteStack_NoteOn(uint8_t note, uint8_t velocity, NoteStack *stack) {
  11:Src/note_stack.c ****   // Remove the note from the list first (in case it is already here).
  12:Src/note_stack.c ****   NoteStack_NoteOff(note, stack);
  13:Src/note_stack.c ****   // In case of saturation, remove the least recently played note from the
  14:Src/note_stack.c ****   // stack.
  15:Src/note_stack.c ****   if (stack->size == kNOTE_STACK_CAPACITY) {
  16:Src/note_stack.c ****     uint8_t least_recent_note;
  17:Src/note_stack.c ****     for (uint8_t i = 1; i <= kNOTE_STACK_CAPACITY; ++i) {
  18:Src/note_stack.c ****       if (stack->pool[i].next_ptr == 0) {
  19:Src/note_stack.c ****         least_recent_note = stack->pool[i].note;
  20:Src/note_stack.c ****       }
  21:Src/note_stack.c ****     }
  22:Src/note_stack.c ****     NoteStack_NoteOff(least_recent_note, stack);
  23:Src/note_stack.c ****   }
  24:Src/note_stack.c ****   // Now we are ready to insert the new note. Find a free slot to insert it.
  25:Src/note_stack.c ****   uint8_t free_slot;
  26:Src/note_stack.c ****   for (uint8_t i = 1; i <= kNOTE_STACK_CAPACITY; ++i) {
  27:Src/note_stack.c ****     if (stack->pool[i].note == kFREE_SLOT) {
  28:Src/note_stack.c ****       free_slot = i;
  29:Src/note_stack.c ****       break;
  30:Src/note_stack.c ****     }
  31:Src/note_stack.c ****   }
  32:Src/note_stack.c ****   stack->pool[free_slot].next_ptr = stack->root_ptr;
ARM GAS  /var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cc00n1aM.s 			page 3


  33:Src/note_stack.c ****   stack->pool[free_slot].note = note;
  34:Src/note_stack.c ****   stack->pool[free_slot].velocity = velocity;
  35:Src/note_stack.c ****   stack->root_ptr = free_slot;
  36:Src/note_stack.c **** 
  37:Src/note_stack.c ****   // The last step consists in inserting the note in the sorted list.
  38:Src/note_stack.c ****   for (uint8_t i = 0; i < stack->size; ++i) {
  39:Src/note_stack.c ****     if (stack->pool[stack->sorted_ptr[i]].note > note) {
  40:Src/note_stack.c ****       for (uint8_t j = stack->size; j > i; --j) {
  41:Src/note_stack.c ****         stack->sorted_ptr[j] = stack->sorted_ptr[j - 1];
  42:Src/note_stack.c ****       }
  43:Src/note_stack.c ****       stack->sorted_ptr[i] = free_slot;
  44:Src/note_stack.c ****       free_slot = 0;
  45:Src/note_stack.c ****       break;
  46:Src/note_stack.c ****     }
  47:Src/note_stack.c ****   }
  48:Src/note_stack.c ****   if (free_slot) {
  49:Src/note_stack.c ****     stack->sorted_ptr[stack->size] = free_slot;
  50:Src/note_stack.c ****   }
  51:Src/note_stack.c ****   stack->size++;
  52:Src/note_stack.c **** }
  53:Src/note_stack.c **** 
  54:Src/note_stack.c **** void NoteStack_NoteOff(uint8_t note, NoteStack *stack) {
  88              		.loc 1 54 56 is_stmt 1 view -0
  89              		.cfi_startproc
  90              		@ args = 0, pretend = 0, frame = 0
  91              		@ frame_needed = 0, uses_anonymous_args = 0
  92              		@ link register save eliminated.
  93              		.loc 1 54 56 is_stmt 0 view .LVU11
  94 0000 10B4     		push	{r4}
  95              	.LCFI0:
  96              		.cfi_def_cfa_offset 4
  97              		.cfi_offset 4, -4
  55:Src/note_stack.c ****   uint8_t current = stack->root_ptr;
  98              		.loc 1 55 3 is_stmt 1 view .LVU12
  99              		.loc 1 55 11 is_stmt 0 view .LVU13
 100 0002 91F83430 		ldrb	r3, [r1, #52]	@ zero_extendqisi2
 101              	.LVL5:
  56:Src/note_stack.c ****   uint8_t previous = 0;
 102              		.loc 1 56 3 is_stmt 1 view .LVU14
  57:Src/note_stack.c ****   while (current) {
 103              		.loc 1 57 3 view .LVU15
  56:Src/note_stack.c ****   uint8_t previous = 0;
 104              		.loc 1 56 11 is_stmt 0 view .LVU16
 105 0006 0024     		movs	r4, #0
 106              		.loc 1 57 9 view .LVU17
 107 0008 04E0     		b	.L4
 108              	.LVL6:
 109              	.L18:
  58:Src/note_stack.c ****     if (stack->pool[current].note == note) {
  59:Src/note_stack.c ****       break;
  60:Src/note_stack.c ****     }
  61:Src/note_stack.c ****     previous = current;
 110              		.loc 1 61 5 is_stmt 1 view .LVU18
  62:Src/note_stack.c ****     current = stack->pool[current].next_ptr;
 111              		.loc 1 62 5 view .LVU19
 112              		.loc 1 62 13 is_stmt 0 view .LVU20
 113 000a 03EB4302 		add	r2, r3, r3, lsl #1
ARM GAS  /var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cc00n1aM.s 			page 4


 114 000e 0A44     		add	r2, r2, r1
 115              	.LVL7:
  61:Src/note_stack.c ****     current = stack->pool[current].next_ptr;
 116              		.loc 1 61 14 view .LVU21
 117 0010 1C46     		mov	r4, r3
 118              		.loc 1 62 13 view .LVU22
 119 0012 D378     		ldrb	r3, [r2, #3]	@ zero_extendqisi2
 120              	.LVL8:
 121              	.L4:
  57:Src/note_stack.c ****     if (stack->pool[current].note == note) {
 122              		.loc 1 57 9 is_stmt 1 view .LVU23
 123 0014 2BB1     		cbz	r3, .L5
  58:Src/note_stack.c ****       break;
 124              		.loc 1 58 5 view .LVU24
  58:Src/note_stack.c ****       break;
 125              		.loc 1 58 29 is_stmt 0 view .LVU25
 126 0016 03EB4302 		add	r2, r3, r3, lsl #1
 127 001a 0A44     		add	r2, r2, r1
 128 001c 5278     		ldrb	r2, [r2, #1]	@ zero_extendqisi2
  58:Src/note_stack.c ****       break;
 129              		.loc 1 58 8 view .LVU26
 130 001e 8242     		cmp	r2, r0
 131 0020 F3D1     		bne	.L18
 132              	.L5:
  63:Src/note_stack.c ****   }
  64:Src/note_stack.c ****   if (current) {
 133              		.loc 1 64 3 is_stmt 1 view .LVU27
 134              		.loc 1 64 6 is_stmt 0 view .LVU28
 135 0022 8BB3     		cbz	r3, .L3
  65:Src/note_stack.c ****     if (previous) {
 136              		.loc 1 65 5 is_stmt 1 view .LVU29
 137              		.loc 1 65 8 is_stmt 0 view .LVU30
 138 0024 9CB1     		cbz	r4, .L8
  66:Src/note_stack.c ****       stack->pool[previous].next_ptr = stack->pool[current].next_ptr;
 139              		.loc 1 66 7 is_stmt 1 view .LVU31
 140              		.loc 1 66 60 is_stmt 0 view .LVU32
 141 0026 03EB4302 		add	r2, r3, r3, lsl #1
 142 002a 0A44     		add	r2, r2, r1
 143 002c D278     		ldrb	r2, [r2, #3]	@ zero_extendqisi2
 144              		.loc 1 66 38 view .LVU33
 145 002e 04EB4404 		add	r4, r4, r4, lsl #1
 146              	.LVL9:
 147              		.loc 1 66 38 view .LVU34
 148 0032 0C44     		add	r4, r4, r1
 149 0034 E270     		strb	r2, [r4, #3]
 150              	.L9:
  67:Src/note_stack.c ****     } else {
  68:Src/note_stack.c ****       stack->root_ptr = stack->pool[current].next_ptr;
  69:Src/note_stack.c ****     }
  70:Src/note_stack.c ****     for (uint8_t i = 0; i < stack->size; ++i) {
 151              		.loc 1 70 5 is_stmt 1 view .LVU35
 152              	.LBB2:
 153              		.loc 1 70 10 view .LVU36
 154              	.LVL10:
 155              		.loc 1 70 18 is_stmt 0 view .LVU37
 156 0036 0022     		movs	r2, #0
 157              	.LVL11:
ARM GAS  /var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cc00n1aM.s 			page 5


 158              	.L10:
 159              		.loc 1 70 25 is_stmt 1 discriminator 1 view .LVU38
 160              		.loc 1 70 34 is_stmt 0 discriminator 1 view .LVU39
 161 0038 0878     		ldrb	r0, [r1]	@ zero_extendqisi2
 162              		.loc 1 70 5 discriminator 1 view .LVU40
 163 003a 9042     		cmp	r0, r2
 164 003c 1AD9     		bls	.L14
  71:Src/note_stack.c ****       if (stack->sorted_ptr[i] == current) {
 165              		.loc 1 71 7 is_stmt 1 view .LVU41
 166              		.loc 1 71 28 is_stmt 0 view .LVU42
 167 003e 8C18     		adds	r4, r1, r2
 168 0040 94F83540 		ldrb	r4, [r4, #53]	@ zero_extendqisi2
 169              		.loc 1 71 10 view .LVU43
 170 0044 9C42     		cmp	r4, r3
 171 0046 12D0     		beq	.L11
  70:Src/note_stack.c ****       if (stack->sorted_ptr[i] == current) {
 172              		.loc 1 70 42 is_stmt 1 discriminator 2 view .LVU44
 173 0048 0132     		adds	r2, r2, #1
 174              	.LVL12:
  70:Src/note_stack.c ****       if (stack->sorted_ptr[i] == current) {
 175              		.loc 1 70 42 is_stmt 0 discriminator 2 view .LVU45
 176 004a D2B2     		uxtb	r2, r2
 177              	.LVL13:
  70:Src/note_stack.c ****       if (stack->sorted_ptr[i] == current) {
 178              		.loc 1 70 42 discriminator 2 view .LVU46
 179 004c F4E7     		b	.L10
 180              	.LVL14:
 181              	.L8:
  70:Src/note_stack.c ****       if (stack->sorted_ptr[i] == current) {
 182              		.loc 1 70 42 discriminator 2 view .LVU47
 183              	.LBE2:
  68:Src/note_stack.c ****     }
 184              		.loc 1 68 7 is_stmt 1 view .LVU48
  68:Src/note_stack.c ****     }
 185              		.loc 1 68 45 is_stmt 0 view .LVU49
 186 004e 03EB4302 		add	r2, r3, r3, lsl #1
 187 0052 0A44     		add	r2, r2, r1
 188 0054 D278     		ldrb	r2, [r2, #3]	@ zero_extendqisi2
  68:Src/note_stack.c ****     }
 189              		.loc 1 68 23 view .LVU50
 190 0056 81F83420 		strb	r2, [r1, #52]
 191 005a ECE7     		b	.L9
 192              	.LVL15:
 193              	.L13:
 194              	.LBB4:
 195              	.LBB3:
  72:Src/note_stack.c ****         for (uint8_t j = i; j < stack->size - 1; ++j) {
  73:Src/note_stack.c ****           stack->sorted_ptr[j] = stack->sorted_ptr[j + 1];
 196              		.loc 1 73 11 is_stmt 1 discriminator 3 view .LVU51
 197              		.loc 1 73 54 is_stmt 0 discriminator 3 view .LVU52
 198 005c 541C     		adds	r4, r2, #1
 199              		.loc 1 73 51 discriminator 3 view .LVU53
 200 005e 0C44     		add	r4, r4, r1
 201 0060 94F835C0 		ldrb	ip, [r4, #53]	@ zero_extendqisi2
 202              		.loc 1 73 32 discriminator 3 view .LVU54
 203 0064 8C18     		adds	r4, r1, r2
 204 0066 84F835C0 		strb	ip, [r4, #53]
ARM GAS  /var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cc00n1aM.s 			page 6


  72:Src/note_stack.c ****         for (uint8_t j = i; j < stack->size - 1; ++j) {
 205              		.loc 1 72 50 is_stmt 1 discriminator 3 view .LVU55
 206 006a 0132     		adds	r2, r2, #1
 207              	.LVL16:
  72:Src/note_stack.c ****         for (uint8_t j = i; j < stack->size - 1; ++j) {
 208              		.loc 1 72 50 is_stmt 0 discriminator 3 view .LVU56
 209 006c D2B2     		uxtb	r2, r2
 210              	.LVL17:
 211              	.L11:
  72:Src/note_stack.c ****         for (uint8_t j = i; j < stack->size - 1; ++j) {
 212              		.loc 1 72 29 is_stmt 1 discriminator 1 view .LVU57
  72:Src/note_stack.c ****         for (uint8_t j = i; j < stack->size - 1; ++j) {
 213              		.loc 1 72 45 is_stmt 0 discriminator 1 view .LVU58
 214 006e 441E     		subs	r4, r0, #1
  72:Src/note_stack.c ****         for (uint8_t j = i; j < stack->size - 1; ++j) {
 215              		.loc 1 72 9 discriminator 1 view .LVU59
 216 0070 A242     		cmp	r2, r4
 217 0072 F3DB     		blt	.L13
 218              	.LVL18:
 219              	.L14:
  72:Src/note_stack.c ****         for (uint8_t j = i; j < stack->size - 1; ++j) {
 220              		.loc 1 72 9 discriminator 1 view .LVU60
 221              	.LBE3:
 222              	.LBE4:
  74:Src/note_stack.c ****         }
  75:Src/note_stack.c ****         break;
  76:Src/note_stack.c ****       }
  77:Src/note_stack.c ****     }
  78:Src/note_stack.c ****     stack->pool[current].next_ptr = 0;
 223              		.loc 1 78 5 is_stmt 1 view .LVU61
 224              		.loc 1 78 35 is_stmt 0 view .LVU62
 225 0074 03EB4303 		add	r3, r3, r3, lsl #1
 226              	.LVL19:
 227              		.loc 1 78 35 view .LVU63
 228 0078 0B44     		add	r3, r3, r1
 229 007a 0022     		movs	r2, #0
 230 007c DA70     		strb	r2, [r3, #3]
  79:Src/note_stack.c ****     stack->pool[current].note = kFREE_SLOT;
 231              		.loc 1 79 5 is_stmt 1 view .LVU64
 232              		.loc 1 79 31 is_stmt 0 view .LVU65
 233 007e FF24     		movs	r4, #255
 234 0080 5C70     		strb	r4, [r3, #1]
  80:Src/note_stack.c ****     stack->pool[current].velocity = 0;
 235              		.loc 1 80 5 is_stmt 1 view .LVU66
 236              		.loc 1 80 35 is_stmt 0 view .LVU67
 237 0082 9A70     		strb	r2, [r3, #2]
  81:Src/note_stack.c ****     stack->size--;
 238              		.loc 1 81 5 is_stmt 1 view .LVU68
 239              		.loc 1 81 16 is_stmt 0 view .LVU69
 240 0084 0138     		subs	r0, r0, #1
 241 0086 0870     		strb	r0, [r1]
 242              	.L3:
  82:Src/note_stack.c ****   }
  83:Src/note_stack.c **** }
 243              		.loc 1 83 1 view .LVU70
 244 0088 5DF8044B 		ldr	r4, [sp], #4
 245              	.LCFI1:
ARM GAS  /var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cc00n1aM.s 			page 7


 246              		.cfi_restore 4
 247              		.cfi_def_cfa_offset 0
 248 008c 7047     		bx	lr
 249              		.cfi_endproc
 250              	.LFE3:
 252              		.section	.text.NoteStack_NoteOn,"ax",%progbits
 253              		.align	1
 254              		.global	NoteStack_NoteOn
 255              		.syntax unified
 256              		.thumb
 257              		.thumb_func
 258              		.fpu fpv4-sp-d16
 260              	NoteStack_NoteOn:
 261              	.LVL20:
 262              	.LFB2:
  10:Src/note_stack.c ****   // Remove the note from the list first (in case it is already here).
 263              		.loc 1 10 73 is_stmt 1 view -0
 264              		.cfi_startproc
 265              		@ args = 0, pretend = 0, frame = 0
 266              		@ frame_needed = 0, uses_anonymous_args = 0
  10:Src/note_stack.c ****   // Remove the note from the list first (in case it is already here).
 267              		.loc 1 10 73 is_stmt 0 view .LVU72
 268 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 269              	.LCFI2:
 270              		.cfi_def_cfa_offset 24
 271              		.cfi_offset 4, -24
 272              		.cfi_offset 5, -20
 273              		.cfi_offset 6, -16
 274              		.cfi_offset 7, -12
 275              		.cfi_offset 8, -8
 276              		.cfi_offset 14, -4
 277 0004 0546     		mov	r5, r0
 278 0006 0F46     		mov	r7, r1
 279 0008 1446     		mov	r4, r2
 280 000a 4FF00008 		mov	r8, #0
 281 000e 4646     		mov	r6, r8
  12:Src/note_stack.c ****   // In case of saturation, remove the least recently played note from the
 282              		.loc 1 12 3 is_stmt 1 view .LVU73
 283 0010 1146     		mov	r1, r2
 284              	.LVL21:
  12:Src/note_stack.c ****   // In case of saturation, remove the least recently played note from the
 285              		.loc 1 12 3 is_stmt 0 view .LVU74
 286 0012 FFF7FEFF 		bl	NoteStack_NoteOff
 287              	.LVL22:
  15:Src/note_stack.c ****     uint8_t least_recent_note;
 288              		.loc 1 15 3 is_stmt 1 view .LVU75
  15:Src/note_stack.c ****     uint8_t least_recent_note;
 289              		.loc 1 15 12 is_stmt 0 view .LVU76
 290 0016 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
  15:Src/note_stack.c ****     uint8_t least_recent_note;
 291              		.loc 1 15 6 view .LVU77
 292 0018 102B     		cmp	r3, #16
 293 001a 1BD0     		beq	.L38
 294              	.L21:
  25:Src/note_stack.c ****   for (uint8_t i = 1; i <= kNOTE_STACK_CAPACITY; ++i) {
 295              		.loc 1 25 3 is_stmt 1 view .LVU78
  26:Src/note_stack.c ****     if (stack->pool[i].note == kFREE_SLOT) {
ARM GAS  /var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cc00n1aM.s 			page 8


 296              		.loc 1 26 3 view .LVU79
 297              	.LBB5:
  26:Src/note_stack.c ****     if (stack->pool[i].note == kFREE_SLOT) {
 298              		.loc 1 26 8 view .LVU80
 299              	.LVL23:
  26:Src/note_stack.c ****     if (stack->pool[i].note == kFREE_SLOT) {
 300              		.loc 1 26 16 is_stmt 0 view .LVU81
 301 001c 0123     		movs	r3, #1
 302              	.LVL24:
 303              	.L24:
  26:Src/note_stack.c ****     if (stack->pool[i].note == kFREE_SLOT) {
 304              		.loc 1 26 23 is_stmt 1 discriminator 1 view .LVU82
  26:Src/note_stack.c ****     if (stack->pool[i].note == kFREE_SLOT) {
 305              		.loc 1 26 3 is_stmt 0 discriminator 1 view .LVU83
 306 001e 102B     		cmp	r3, #16
 307 0020 20D8     		bhi	.L25
  27:Src/note_stack.c ****       free_slot = i;
 308              		.loc 1 27 5 is_stmt 1 view .LVU84
  27:Src/note_stack.c ****       free_slot = i;
 309              		.loc 1 27 23 is_stmt 0 view .LVU85
 310 0022 03EB4302 		add	r2, r3, r3, lsl #1
 311 0026 2244     		add	r2, r2, r4
 312 0028 5278     		ldrb	r2, [r2, #1]	@ zero_extendqisi2
  27:Src/note_stack.c ****       free_slot = i;
 313              		.loc 1 27 8 view .LVU86
 314 002a FF2A     		cmp	r2, #255
 315 002c 19D0     		beq	.L34
  26:Src/note_stack.c ****     if (stack->pool[i].note == kFREE_SLOT) {
 316              		.loc 1 26 50 is_stmt 1 discriminator 2 view .LVU87
 317 002e 0133     		adds	r3, r3, #1
 318              	.LVL25:
  26:Src/note_stack.c ****     if (stack->pool[i].note == kFREE_SLOT) {
 319              		.loc 1 26 50 is_stmt 0 discriminator 2 view .LVU88
 320 0030 DBB2     		uxtb	r3, r3
 321              	.LVL26:
  26:Src/note_stack.c ****     if (stack->pool[i].note == kFREE_SLOT) {
 322              		.loc 1 26 50 discriminator 2 view .LVU89
 323 0032 F4E7     		b	.L24
 324              	.LVL27:
 325              	.L22:
  26:Src/note_stack.c ****     if (stack->pool[i].note == kFREE_SLOT) {
 326              		.loc 1 26 50 discriminator 2 view .LVU90
 327              	.LBE5:
 328              	.LBB6:
 329              	.LBB7:
  17:Src/note_stack.c ****       if (stack->pool[i].next_ptr == 0) {
 330              		.loc 1 17 52 is_stmt 1 discriminator 2 view .LVU91
 331 0034 0133     		adds	r3, r3, #1
 332              	.LVL28:
  17:Src/note_stack.c ****       if (stack->pool[i].next_ptr == 0) {
 333              		.loc 1 17 52 is_stmt 0 discriminator 2 view .LVU92
 334 0036 DBB2     		uxtb	r3, r3
 335              	.LVL29:
 336              	.L20:
  17:Src/note_stack.c ****       if (stack->pool[i].next_ptr == 0) {
 337              		.loc 1 17 25 is_stmt 1 discriminator 1 view .LVU93
  17:Src/note_stack.c ****       if (stack->pool[i].next_ptr == 0) {
ARM GAS  /var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cc00n1aM.s 			page 9


 338              		.loc 1 17 5 is_stmt 0 discriminator 1 view .LVU94
 339 0038 102B     		cmp	r3, #16
 340 003a 0DD8     		bhi	.L39
  18:Src/note_stack.c ****         least_recent_note = stack->pool[i].note;
 341              		.loc 1 18 7 is_stmt 1 view .LVU95
  18:Src/note_stack.c ****         least_recent_note = stack->pool[i].note;
 342              		.loc 1 18 25 is_stmt 0 view .LVU96
 343 003c 03EB4302 		add	r2, r3, r3, lsl #1
 344 0040 2244     		add	r2, r2, r4
 345 0042 D278     		ldrb	r2, [r2, #3]	@ zero_extendqisi2
  18:Src/note_stack.c ****         least_recent_note = stack->pool[i].note;
 346              		.loc 1 18 10 view .LVU97
 347 0044 002A     		cmp	r2, #0
 348 0046 F5D1     		bne	.L22
  19:Src/note_stack.c ****       }
 349              		.loc 1 19 9 is_stmt 1 view .LVU98
  19:Src/note_stack.c ****       }
 350              		.loc 1 19 27 is_stmt 0 view .LVU99
 351 0048 03EB4302 		add	r2, r3, r3, lsl #1
 352 004c 2244     		add	r2, r2, r4
 353 004e 92F80180 		ldrb	r8, [r2, #1]	@ zero_extendqisi2
 354              	.LVL30:
  19:Src/note_stack.c ****       }
 355              		.loc 1 19 27 view .LVU100
 356 0052 EFE7     		b	.L22
 357              	.LVL31:
 358              	.L38:
  17:Src/note_stack.c ****       if (stack->pool[i].next_ptr == 0) {
 359              		.loc 1 17 18 view .LVU101
 360 0054 0123     		movs	r3, #1
 361 0056 EFE7     		b	.L20
 362              	.LVL32:
 363              	.L39:
  17:Src/note_stack.c ****       if (stack->pool[i].next_ptr == 0) {
 364              		.loc 1 17 18 view .LVU102
 365              	.LBE7:
  22:Src/note_stack.c ****   }
 366              		.loc 1 22 5 is_stmt 1 view .LVU103
 367 0058 2146     		mov	r1, r4
 368 005a 4046     		mov	r0, r8
 369 005c FFF7FEFF 		bl	NoteStack_NoteOff
 370              	.LVL33:
  22:Src/note_stack.c ****   }
 371              		.loc 1 22 5 is_stmt 0 view .LVU104
 372 0060 DCE7     		b	.L21
 373              	.LVL34:
 374              	.L34:
  22:Src/note_stack.c ****   }
 375              		.loc 1 22 5 view .LVU105
 376              	.LBE6:
 377              	.LBB8:
  28:Src/note_stack.c ****       break;
 378              		.loc 1 28 17 view .LVU106
 379 0062 1E46     		mov	r6, r3
 380              	.L25:
 381              	.LVL35:
  28:Src/note_stack.c ****       break;
ARM GAS  /var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cc00n1aM.s 			page 10


 382              		.loc 1 28 17 view .LVU107
 383              	.LBE8:
  32:Src/note_stack.c ****   stack->pool[free_slot].note = note;
 384              		.loc 1 32 3 is_stmt 1 view .LVU108
  32:Src/note_stack.c ****   stack->pool[free_slot].note = note;
 385              		.loc 1 32 42 is_stmt 0 view .LVU109
 386 0064 94F83420 		ldrb	r2, [r4, #52]	@ zero_extendqisi2
  32:Src/note_stack.c ****   stack->pool[free_slot].note = note;
 387              		.loc 1 32 35 view .LVU110
 388 0068 06EB4603 		add	r3, r6, r6, lsl #1
 389              	.LVL36:
  32:Src/note_stack.c ****   stack->pool[free_slot].note = note;
 390              		.loc 1 32 35 view .LVU111
 391 006c 2344     		add	r3, r3, r4
 392 006e DA70     		strb	r2, [r3, #3]
  33:Src/note_stack.c ****   stack->pool[free_slot].velocity = velocity;
 393              		.loc 1 33 3 is_stmt 1 view .LVU112
  33:Src/note_stack.c ****   stack->pool[free_slot].velocity = velocity;
 394              		.loc 1 33 31 is_stmt 0 view .LVU113
 395 0070 5D70     		strb	r5, [r3, #1]
  34:Src/note_stack.c ****   stack->root_ptr = free_slot;
 396              		.loc 1 34 3 is_stmt 1 view .LVU114
  34:Src/note_stack.c ****   stack->root_ptr = free_slot;
 397              		.loc 1 34 35 is_stmt 0 view .LVU115
 398 0072 9F70     		strb	r7, [r3, #2]
  35:Src/note_stack.c **** 
 399              		.loc 1 35 3 is_stmt 1 view .LVU116
  35:Src/note_stack.c **** 
 400              		.loc 1 35 19 is_stmt 0 view .LVU117
 401 0074 84F83460 		strb	r6, [r4, #52]
  38:Src/note_stack.c ****     if (stack->pool[stack->sorted_ptr[i]].note > note) {
 402              		.loc 1 38 3 is_stmt 1 view .LVU118
 403              	.LBB9:
  38:Src/note_stack.c ****     if (stack->pool[stack->sorted_ptr[i]].note > note) {
 404              		.loc 1 38 8 view .LVU119
 405              	.LVL37:
  38:Src/note_stack.c ****     if (stack->pool[stack->sorted_ptr[i]].note > note) {
 406              		.loc 1 38 16 is_stmt 0 view .LVU120
 407 0078 0023     		movs	r3, #0
 408              	.LVL38:
 409              	.L27:
  38:Src/note_stack.c ****     if (stack->pool[stack->sorted_ptr[i]].note > note) {
 410              		.loc 1 38 23 is_stmt 1 discriminator 1 view .LVU121
  38:Src/note_stack.c ****     if (stack->pool[stack->sorted_ptr[i]].note > note) {
 411              		.loc 1 38 32 is_stmt 0 discriminator 1 view .LVU122
 412 007a 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
  38:Src/note_stack.c ****     if (stack->pool[stack->sorted_ptr[i]].note > note) {
 413              		.loc 1 38 3 discriminator 1 view .LVU123
 414 007c 9842     		cmp	r0, r3
 415 007e 1FD9     		bls	.L40
  39:Src/note_stack.c ****       for (uint8_t j = stack->size; j > i; --j) {
 416              		.loc 1 39 5 is_stmt 1 view .LVU124
  39:Src/note_stack.c ****       for (uint8_t j = stack->size; j > i; --j) {
 417              		.loc 1 39 38 is_stmt 0 view .LVU125
 418 0080 1F46     		mov	r7, r3
 419 0082 E218     		adds	r2, r4, r3
 420 0084 92F83510 		ldrb	r1, [r2, #53]	@ zero_extendqisi2
ARM GAS  /var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cc00n1aM.s 			page 11


  39:Src/note_stack.c ****       for (uint8_t j = stack->size; j > i; --j) {
 421              		.loc 1 39 42 view .LVU126
 422 0088 01EB4101 		add	r1, r1, r1, lsl #1
 423 008c 2144     		add	r1, r1, r4
 424 008e 4A78     		ldrb	r2, [r1, #1]	@ zero_extendqisi2
  39:Src/note_stack.c ****       for (uint8_t j = stack->size; j > i; --j) {
 425              		.loc 1 39 8 view .LVU127
 426 0090 AA42     		cmp	r2, r5
 427 0092 13D8     		bhi	.L41
  38:Src/note_stack.c ****     if (stack->pool[stack->sorted_ptr[i]].note > note) {
 428              		.loc 1 38 40 is_stmt 1 discriminator 2 view .LVU128
 429 0094 0133     		adds	r3, r3, #1
 430              	.LVL39:
  38:Src/note_stack.c ****     if (stack->pool[stack->sorted_ptr[i]].note > note) {
 431              		.loc 1 38 40 is_stmt 0 discriminator 2 view .LVU129
 432 0096 DBB2     		uxtb	r3, r3
 433              	.LVL40:
  38:Src/note_stack.c ****     if (stack->pool[stack->sorted_ptr[i]].note > note) {
 434              		.loc 1 38 40 discriminator 2 view .LVU130
 435 0098 EFE7     		b	.L27
 436              	.LVL41:
 437              	.L30:
 438              	.LBB10:
  41:Src/note_stack.c ****       }
 439              		.loc 1 41 9 is_stmt 1 discriminator 3 view .LVU131
  41:Src/note_stack.c ****       }
 440              		.loc 1 41 52 is_stmt 0 discriminator 3 view .LVU132
 441 009a 511E     		subs	r1, r2, #1
  41:Src/note_stack.c ****       }
 442              		.loc 1 41 49 discriminator 3 view .LVU133
 443 009c 6518     		adds	r5, r4, r1
 444 009e 95F83550 		ldrb	r5, [r5, #53]	@ zero_extendqisi2
  41:Src/note_stack.c ****       }
 445              		.loc 1 41 30 discriminator 3 view .LVU134
 446 00a2 2244     		add	r2, r2, r4
 447              	.LVL42:
  41:Src/note_stack.c ****       }
 448              		.loc 1 41 30 discriminator 3 view .LVU135
 449 00a4 82F83550 		strb	r5, [r2, #53]
  40:Src/note_stack.c ****         stack->sorted_ptr[j] = stack->sorted_ptr[j - 1];
 450              		.loc 1 40 44 is_stmt 1 discriminator 3 view .LVU136
 451 00a8 CAB2     		uxtb	r2, r1
 452              	.LVL43:
 453              	.L28:
  40:Src/note_stack.c ****         stack->sorted_ptr[j] = stack->sorted_ptr[j - 1];
 454              		.loc 1 40 37 discriminator 1 view .LVU137
  40:Src/note_stack.c ****         stack->sorted_ptr[j] = stack->sorted_ptr[j - 1];
 455              		.loc 1 40 7 is_stmt 0 discriminator 1 view .LVU138
 456 00aa 9342     		cmp	r3, r2
 457 00ac F5D3     		bcc	.L30
 458              	.LBE10:
  43:Src/note_stack.c ****       free_slot = 0;
 459              		.loc 1 43 7 is_stmt 1 view .LVU139
  43:Src/note_stack.c ****       free_slot = 0;
 460              		.loc 1 43 28 is_stmt 0 view .LVU140
 461 00ae 2744     		add	r7, r7, r4
 462 00b0 87F83560 		strb	r6, [r7, #53]
ARM GAS  /var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cc00n1aM.s 			page 12


  44:Src/note_stack.c ****       break;
 463              		.loc 1 44 7 is_stmt 1 view .LVU141
 464              	.LVL44:
  45:Src/note_stack.c ****     }
 465              		.loc 1 45 7 view .LVU142
  45:Src/note_stack.c ****     }
 466              		.loc 1 45 7 is_stmt 0 view .LVU143
 467              	.LBE9:
  48:Src/note_stack.c ****     stack->sorted_ptr[stack->size] = free_slot;
 468              		.loc 1 48 3 is_stmt 1 view .LVU144
 469              	.L31:
  51:Src/note_stack.c **** }
 470              		.loc 1 51 3 view .LVU145
  51:Src/note_stack.c **** }
 471              		.loc 1 51 14 is_stmt 0 view .LVU146
 472 00b4 431C     		adds	r3, r0, #1
 473 00b6 2370     		strb	r3, [r4]
  52:Src/note_stack.c **** 
 474              		.loc 1 52 1 view .LVU147
 475 00b8 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 476              	.LVL45:
 477              	.L41:
 478              	.LBB12:
 479              	.LBB11:
  40:Src/note_stack.c ****         stack->sorted_ptr[j] = stack->sorted_ptr[j - 1];
 480              		.loc 1 40 20 view .LVU148
 481 00bc 0246     		mov	r2, r0
 482 00be F4E7     		b	.L28
 483              	.L40:
  40:Src/note_stack.c ****         stack->sorted_ptr[j] = stack->sorted_ptr[j - 1];
 484              		.loc 1 40 20 view .LVU149
 485              	.LBE11:
 486              	.LBE12:
  48:Src/note_stack.c ****     stack->sorted_ptr[stack->size] = free_slot;
 487              		.loc 1 48 3 is_stmt 1 view .LVU150
  48:Src/note_stack.c ****     stack->sorted_ptr[stack->size] = free_slot;
 488              		.loc 1 48 6 is_stmt 0 view .LVU151
 489 00c0 002E     		cmp	r6, #0
 490 00c2 F7D0     		beq	.L31
  49:Src/note_stack.c ****   }
 491              		.loc 1 49 5 is_stmt 1 view .LVU152
  49:Src/note_stack.c ****   }
 492              		.loc 1 49 36 is_stmt 0 view .LVU153
 493 00c4 2318     		adds	r3, r4, r0
 494              	.LVL46:
  49:Src/note_stack.c ****   }
 495              		.loc 1 49 36 view .LVU154
 496 00c6 83F83560 		strb	r6, [r3, #53]
 497 00ca F3E7     		b	.L31
 498              		.cfi_endproc
 499              	.LFE2:
 501              		.section	.text.NoteStack_Clear,"ax",%progbits
 502              		.align	1
 503              		.global	NoteStack_Clear
 504              		.syntax unified
 505              		.thumb
 506              		.thumb_func
ARM GAS  /var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cc00n1aM.s 			page 13


 507              		.fpu fpv4-sp-d16
 509              	NoteStack_Clear:
 510              	.LVL47:
 511              	.LFB4:
  84:Src/note_stack.c **** 
  85:Src/note_stack.c **** void NoteStack_Clear(NoteStack *stack) {
 512              		.loc 1 85 40 is_stmt 1 view -0
 513              		.cfi_startproc
 514              		@ args = 0, pretend = 0, frame = 0
 515              		@ frame_needed = 0, uses_anonymous_args = 0
 516              		@ link register save eliminated.
  86:Src/note_stack.c ****   stack->size = 0;
 517              		.loc 1 86 3 view .LVU156
 518              		.loc 1 86 15 is_stmt 0 view .LVU157
 519 0000 0023     		movs	r3, #0
 520 0002 0370     		strb	r3, [r0]
  87:Src/note_stack.c ****   stack->root_ptr = 0;
 521              		.loc 1 87 3 is_stmt 1 view .LVU158
 522              		.loc 1 87 19 is_stmt 0 view .LVU159
 523 0004 80F83430 		strb	r3, [r0, #52]
  88:Src/note_stack.c ****   for (uint8_t i = 0; i <= kNOTE_STACK_CAPACITY; ++i) {
 524              		.loc 1 88 3 is_stmt 1 view .LVU160
 525              	.LBB13:
 526              		.loc 1 88 8 view .LVU161
 527              	.LVL48:
 528              		.loc 1 88 3 is_stmt 0 view .LVU162
 529 0008 06E0     		b	.L43
 530              	.LVL49:
 531              	.L44:
  89:Src/note_stack.c ****     stack->pool[i].note = kFREE_SLOT;
 532              		.loc 1 89 5 is_stmt 1 discriminator 3 view .LVU163
 533              		.loc 1 89 25 is_stmt 0 discriminator 3 view .LVU164
 534 000a 03EB4302 		add	r2, r3, r3, lsl #1
 535 000e 0244     		add	r2, r2, r0
 536 0010 FF21     		movs	r1, #255
 537 0012 5170     		strb	r1, [r2, #1]
  88:Src/note_stack.c ****   for (uint8_t i = 0; i <= kNOTE_STACK_CAPACITY; ++i) {
 538              		.loc 1 88 50 is_stmt 1 discriminator 3 view .LVU165
 539 0014 0133     		adds	r3, r3, #1
 540              	.LVL50:
  88:Src/note_stack.c ****   for (uint8_t i = 0; i <= kNOTE_STACK_CAPACITY; ++i) {
 541              		.loc 1 88 50 is_stmt 0 discriminator 3 view .LVU166
 542 0016 DBB2     		uxtb	r3, r3
 543              	.LVL51:
 544              	.L43:
  88:Src/note_stack.c ****   for (uint8_t i = 0; i <= kNOTE_STACK_CAPACITY; ++i) {
 545              		.loc 1 88 23 is_stmt 1 discriminator 1 view .LVU167
  88:Src/note_stack.c ****   for (uint8_t i = 0; i <= kNOTE_STACK_CAPACITY; ++i) {
 546              		.loc 1 88 3 is_stmt 0 discriminator 1 view .LVU168
 547 0018 102B     		cmp	r3, #16
 548 001a F6D9     		bls	.L44
 549              	.LBE13:
  90:Src/note_stack.c ****   }
  91:Src/note_stack.c **** }
 550              		.loc 1 91 1 view .LVU169
 551 001c 7047     		bx	lr
 552              		.cfi_endproc
ARM GAS  /var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cc00n1aM.s 			page 14


 553              	.LFE4:
 555              		.text
 556              	.Letext0:
 557              		.file 2 "/usr/local/Caskroom/gcc-arm-embedded/10-2020-q4-major/gcc-arm-none-eabi-10-2020-q4-major/
 558              		.file 3 "/usr/local/Caskroom/gcc-arm-embedded/10-2020-q4-major/gcc-arm-none-eabi-10-2020-q4-major/
 559              		.file 4 "Inc/note_stack.h"
ARM GAS  /var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cc00n1aM.s 			page 15


DEFINED SYMBOLS
                            *ABS*:0000000000000000 note_stack.c
/var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cc00n1aM.s:18     .text.NoteStack_RecentNote:0000000000000000 $t
/var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cc00n1aM.s:26     .text.NoteStack_RecentNote:0000000000000000 NoteStack_RecentNote
/var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cc00n1aM.s:49     .text.NoteStack_RecentVelocity:0000000000000000 $t
/var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cc00n1aM.s:56     .text.NoteStack_RecentVelocity:0000000000000000 NoteStack_RecentVelocity
/var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cc00n1aM.s:78     .text.NoteStack_NoteOff:0000000000000000 $t
/var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cc00n1aM.s:85     .text.NoteStack_NoteOff:0000000000000000 NoteStack_NoteOff
/var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cc00n1aM.s:253    .text.NoteStack_NoteOn:0000000000000000 $t
/var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cc00n1aM.s:260    .text.NoteStack_NoteOn:0000000000000000 NoteStack_NoteOn
/var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cc00n1aM.s:502    .text.NoteStack_Clear:0000000000000000 $t
/var/folders/80/65lm4rm97rv_n74c85vt01040000gn/T//cc00n1aM.s:509    .text.NoteStack_Clear:0000000000000000 NoteStack_Clear

NO UNDEFINED SYMBOLS
